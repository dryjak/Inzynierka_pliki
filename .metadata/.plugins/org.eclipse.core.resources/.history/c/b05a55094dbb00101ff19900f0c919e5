/*
 * SerwoSimple.c
 *
 *  Created on: Nov 6, 2025
 *      Author: dryla
 */


#include "SerwoSimple.h"
#include "tim.h"

void SetAngle(uint16_t Angle, uint8_t Mode)
{
	uint16_t Tmp;

	if(Angle < AngleMin)
	{
		Angle = AngleMin;
	}
	if(Angle > AngleMax)
	{
		Angle = AngleMax;
	}

	if(Mode > 0)
	{
		Tmp = (AngleMin + ((Angle - AngleMin) * STEP) / 1000);
	}
	else
	{
		Tmp = (AngleMin - ((Angle - AngleMin) * STEP) / 1000);
	}

	__HAL_TIM_SET_COMPARE(TimerHandler, TimerChannel,Tmp);
}

